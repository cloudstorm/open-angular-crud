#SERVICES

#CONTROLLERS
#= require_tree ../controllers/

# RESOURCES
#= require_tree ../resources

# CLOUDSTORM
#= require cloudstorm/src/cloudstorm

todoList = angular.module("todoList", [
  "ngRaven"
  "ngRoute"
  "ngResource"
  "ngAnimate"
  "ngSanitize"
  "ui.bootstrap"
  "ui.sortable"
  "ui.select"
  "ngDialog"
  "spin.js"
  "cloudStorm"
  "todoList.resources"
])
.config(["$routeProvider", ($routeProvider) ->
  $routeProvider.when("/items",
    templateUrl: "todo_list_index_base.html"
    controller: "ItemCtrl"


  # ----- /CloudStorm ---------------------------

  ).otherwise redirectTo: "/items"

])

# ----- CS CONFIG -------------------------------------------------------------

todoList.config([
  'csSettingsProvider', 'localizationProvider'
  (csSettingsProvider, LocalizationProvider) ->
    csSettingsProvider.set('date-format', 'yyyy-MM-dd')
    csSettingsProvider.set('time-zone-offset', '-1200')
    csSettingsProvider.set('i18n-engine', LocalizationProvider.$get())
])

.config(['localizationProvider', (LocalizationProvider) ->
  localization = LocalizationProvider.$get()
  localization.add('false', 'Nem')
  localization.add('true',  'Igen')
])

# ----- DEBUG INFO ------------------------------------------------------------

misto.run ['$rootScope', ($rootScope) ->

  $rootScope.$on 'field-value-changed', () ->
    console.info 'field-value-changed event fired'

  $rootScope.$on 'submit-form-on-enter', () ->
    console.info 'submit-form-on-enter event fired'

  $rootScope.$on 'input-value-changed', () ->
    console.info 'input-value-changed event fired'

  $rootScope.$on 'form-cancel', () ->
    console.info 'form-cancel event fired'

  $rootScope.$on 'form-init', () ->
    console.info 'form-init event fired'

  $rootScope.$on 'form-submit', () ->
    console.info 'form-submit event fired'

  $rootScope.$on 'form-error', () ->
    console.info 'form-error event fired'

  $rootScope.$on 'wizard-canceled', () ->
    console.info 'wizard-canceled event fired'

  $rootScope.$on 'wizard-submited', () ->
    console.info 'wizard-submited event fired'

  $rootScope.$on 'wizard-finished', () ->
    console.info 'wizard-finished event fired'

  $rootScope.$on 'wizard-error', () ->
    console.info 'wizard-error event fired'

]
